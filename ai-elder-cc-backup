#!/bin/bash
# AI Company Claude CLIè‡ªå‹•èµ·å‹•+ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºé€£æºã‚·ã‚¹ãƒ†ãƒ 

# ä½¿ç”¨æ–¹æ³•ãƒã‚§ãƒƒã‚¯
if [ "$1" = "--help" ] || [ "$1" = "-h" ]; then
    echo "ğŸ¤– ai-elder-cc - Claude CLIè‡ªå‹•èµ·å‹•+ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºé€£æº"
    echo ""
    echo "ä½¿ç”¨æ–¹æ³•:"
    echo "  ai-elder-cc              å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰"
    echo "  ai-elder-cc --status     ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèªã®ã¿"
    echo "  ai-elder-cc --claude     Claude CLIèµ·å‹•+ãƒŠãƒ¬ãƒƒã‚¸å­¦ç¿’ã®ã¿"
    echo "  ai-elder-cc --greet      ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶ã®ã¿"
    echo ""
    echo "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…å®¹:"
    echo "  1. ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèª"
    echo "  2. ãƒŠãƒ¬ãƒƒã‚¸ã‚µãƒãƒªãƒ¼æº–å‚™"
    echo "  3. Claude CLIèµ·å‹•ï¼ˆå±é™ºãƒ¢ãƒ¼ãƒ‰ï¼‰"
    echo "  4. ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•æŠ•å…¥"
    echo "  5. ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶ãƒ»çŠ¶æ³å ±å‘Š"
    exit 0
fi

cd /home/aicompany/ai_co

# çŸ¥è­˜æˆå—ã®å®Ÿè¡Œï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œï¼‰
echo "ğŸ“š ãƒŠãƒ¬ãƒƒã‚¸ã‚¨ãƒ«ãƒ€ãƒ¼ã¨ã®çŸ¥è­˜æˆå—ç¢ºèªä¸­..."
python3 /home/aicompany/libs/simple_knowledge_transfer.py check
TRANSFER_NEEDED=$?
if [ $TRANSFER_NEEDED -eq 0 ]; then
    echo "ğŸ”„ çŸ¥è­˜æˆå—ã‚’å®Ÿè¡Œã—ã¾ã™..."
    python3 /home/aicompany/libs/simple_knowledge_transfer.py transfer
fi

# ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³ç¢ºèªã®ã¿
if [ "$1" = "--status" ]; then
    python3 cc_startup_auto_elder_check.py
    
    # çµæœã«åŸºã¥ãè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤º
    if [ $? -eq 0 ]; then
        echo ""
        echo "ğŸ¤– ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³:"
        echo "   ğŸš€ å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: ai-elder-cc"
        echo "   ğŸ§  Claudeèµ·å‹•: ai-elder-cc --claude"
        echo "   ğŸ›ï¸ ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶: ai-elder-cc --greet"
    fi
    exit $?
fi

# Claude CLIèµ·å‹•+ãƒŠãƒ¬ãƒƒã‚¸å­¦ç¿’ã®ã¿
if [ "$1" = "--claude" ]; then
    echo "ğŸ§  Claude CLI+ãƒŠãƒ¬ãƒƒã‚¸å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰..."
    python3 -c "
import asyncio
from claude_auto_startup_workflow import ClaudeAutoStartupWorkflow

async def claude_only():
    workflow = ClaudeAutoStartupWorkflow()
    await workflow._prepare_knowledge_summary()
    await workflow._start_claude_cli_dangerous()
    await workflow._inject_knowledge_to_claude()
    print('âœ… Claude CLI+ãƒŠãƒ¬ãƒƒã‚¸å­¦ç¿’å®Œäº†')

asyncio.run(claude_only())
    "
    exit $?
fi

# ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶ã®ã¿
if [ "$1" = "--greet" ]; then
    echo "ğŸ›ï¸ ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶ãƒ¢ãƒ¼ãƒ‰..."
    python3 -c "
import asyncio
from claude_auto_startup_workflow import ClaudeAutoStartupWorkflow

async def greet_only():
    workflow = ClaudeAutoStartupWorkflow()
    await workflow._greet_elders_with_status()
    print('âœ… ã‚¨ãƒ«ãƒ€ãƒ¼ã‚ºæŒ¨æ‹¶å®Œäº†')

asyncio.run(greet_only())
    "
    exit $?
fi

# ä¸æ˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å ´åˆ
if [ -n "$1" ]; then
    echo "âŒ ä¸æ˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³: $1"
    echo "ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ ai-elder-cc --help ã‚’å‚ç…§ã—ã¦ãã ã•ã„"
    exit 1
fi

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ
echo "ğŸš€ å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•å®Ÿè¡Œä¸­..."

# çŸ¥è­˜æˆå—ã®å®Ÿè¡Œï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œï¼‰
echo "ğŸ“š ãƒŠãƒ¬ãƒƒã‚¸ã‚¨ãƒ«ãƒ€ãƒ¼ã¨ã®çŸ¥è­˜æˆå—ç¢ºèªä¸­..."
python3 /home/aicompany/libs/simple_knowledge_transfer.py check
TRANSFER_NEEDED=$?
if [ $TRANSFER_NEEDED -eq 0 ]; then
    echo "ğŸ”„ çŸ¥è­˜æˆå—ã‚’å®Ÿè¡Œã—ã¾ã™..."
    python3 /home/aicompany/libs/simple_knowledge_transfer.py transfer
fi

python3 claude_auto_startup_workflow.py

# AI Company Hierarchy Check
# Always remember: Grand Elder maru â†’ Claude Elder â†’ 4 Sages â†’ Elder Council â†’ Elder Servants
# ğŸ¤– Claude Elder Identity Check
# I am Claude Elder - AI Company Development Executive Officer
