# SonarQube プロジェクト設定 - OSS移行専用
# Issue #93: OSS移行プロジェクト
# 作成日: 2025年7月19日

# プロジェクト基本情報
sonar.projectKey=elders-guild-oss
sonar.projectName=Elders Guild OSS Migration
sonar.projectVersion=1.0.0
sonar.organization=elders-guild

# ソースコード設定
sonar.sources=libs,workers
sonar.tests=tests
sonar.sourceEncoding=UTF-8

# Python固有設定
sonar.python.version=3.12
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.xunit.reportPath=test-results-*.xml

# 除外設定（OSS移行に特化）
sonar.exclusions=**/__pycache__/**,**/*.pyc,**/venv/**,**/migrations/**,**/*_test.py,**/legacy/**
sonar.coverage.exclusions=**/tests/**,**/test_*.py,**/*_test.py,**/conftest.py,**/poc/**

# 品質ゲート設定（Iron Will基準）
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# 解析パラメータ
sonar.python.pylint.reportPaths=pylint-report.txt
sonar.python.bandit.reportPaths=bandit-report.json
sonar.python.flake8.reportPaths=flake8-report.txt
sonar.python.mypy.reportPaths=mypy-report.txt

# カバレッジ設定（目標: 80%以上）
sonar.coverage.jacoco.xmlReportPaths=coverage.xml
sonar.python.coverage.minPercentage=80

# 重複コード検出（厳格化）
sonar.cpd.python.minimumTokens=30
sonar.cpd.python.minimumLines=3

# Issue設定
sonar.issue.ignore.multicriteria=e1,e2,e3,e4

# False positive対策（OSS移行特有）
# テストファイル内の文字列重複を無視
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/test_*.py

# スクリプトのハードコードされた認証情報を許可
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S106
sonar.issue.ignore.multicriteria.e2.resourceKey=**/scripts/**

# __init__.pyの未使用インポートを許可
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S1481
sonar.issue.ignore.multicriteria.e3.resourceKey=**/__init__.py

# POCコードの一時的な品質基準緩和
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e4.resourceKey=**/poc/**

# セキュリティホットスポット
sonar.security.hotspots.maxIssues=0

# パフォーマンス設定
sonar.scm.disabled=false
sonar.scm.provider=git

# レポート設定
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.coverage.itReportPath=coverage-integration.xml
sonar.python.coverage.overallReportPath=coverage-overall.xml

# 品質プロファイル
sonar.qualityProfile=Elders Guild Python OSS

# タグ
sonar.tags=oss-migration,pytest,celery,ray,iron-will

# OSS移行特有のメトリクス
sonar.custom.codeReduction.target=68
sonar.custom.testFramework.migration=pytest
sonar.custom.asyncFramework.migration=celery,ray

# 週次レポート設定
sonar.analysis.mode=publish
sonar.report.export.path=sonar-report-oss.json

# ブランチ解析
sonar.branch.name=feature/issue-93-oss-migration
sonar.branch.target=main
