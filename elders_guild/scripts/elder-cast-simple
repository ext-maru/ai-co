#!/usr/bin/env python3
"""
AI Elder Cast Simple - æœ€å°ç‰ˆçŸ¥è­˜æ³¨å…¥èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆã‚¿ã‚¹ã‚¯çµ±åˆç‰ˆï¼‰
ä¸­é–“ç‰ˆçŸ¥è­˜ï¼ˆ8KBï¼‰ã‚’ä½¿ç”¨ã—ã¦Claude Codeã‚’èµ·å‹•
"""

import asyncio
import os
import subprocess
import sys
from datetime import datetime
from pathlib import Path

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’ãƒ‘ã‚¹ã«è¿½åŠ 
# ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’è§£æ±ºã—ã¦ã‹ã‚‰å®Ÿéš›ã®ãƒ‘ã‚¹ã‚’å–å¾—
script_path = Path(__file__).resolve()
project_root = script_path.parent.parent.parent  # ai_coãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
sys.path.insert(0, str(project_root))

# è‰²ä»˜ãå‡ºåŠ›ç”¨ã®ANSIã‚³ãƒ¼ãƒ‰
COLORS = {
    "cyan": "\033[0;36m",
    "green": "\033[0;32m",
    "yellow": "\033[1;33m",
    "purple": "\033[0;35m",
    "reset": "\033[0m"
}


def print_colored(text, color="cyan"):
    """è‰²ä»˜ããƒ†ã‚­ã‚¹ãƒˆã‚’å‡ºåŠ›"""
    print(f"{COLORS.get(color, '')}{text}{COLORS['reset']}")


async def quick_task_sync():
    """ã‚¿ã‚¹ã‚¯åŒæœŸå‡¦ç† - å®Œå…¨ç„¡åŠ¹åŒ–"""
    # åŒæœŸå‡¦ç†ã‚’å®Œå…¨ç„¡åŠ¹åŒ– - èµ·å‹•æ™‚ã®é…å»¶ã¨ã‚¨ãƒ©ãƒ¼å›é¿ã®ãŸã‚
    print_colored("ğŸš« ã‚¿ã‚¹ã‚¯åŒæœŸã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™", "yellow")
    return


def main():
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
    
    print_colored("ğŸ”® AI Elder Cast Simple (Task Integration) èµ·å‹•", "purple")
    print()
    
    # çŸ¥è­˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆä¸­é–“ç‰ˆï¼‰
    knowledge_file = project_root / "docs" / "technical" / "ELDER_KNOWLEDGE_CONTEXT_MEDIUM.md"
    
    if not knowledge_file.exists():
        print_colored(f"âŒ çŸ¥è­˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {knowledge_file}", "red")
        sys.exit(1)
    
    # æ—¥æœ¬èªç’°å¢ƒè¨­å®š
    os.environ["LANG"] = "ja_JP.UTF-8"
    os.environ["LC_ALL"] = "ja_JP.UTF-8"
    
    # ã‚¿ã‚¹ã‚¯åŒæœŸã¯æ˜ç¤ºçš„ã«todoã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸå ´åˆã®ã¿å®Ÿè¡Œ
    # ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯åŒæœŸã—ãªã„ï¼‰
    
    # Claude Codeèµ·å‹•
    try:
        print_colored("ğŸ›ï¸ ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ«ãƒ€ãƒ¼å¬å–šä¸­...", "green")
        print()
        
        subprocess.run([
            "claude", 
            "--dangerously-skip-permissions", 
            str(knowledge_file)
        ])
        
    except KeyboardInterrupt:
        print()
        print_colored("âš¡ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­æ–­", "yellow")
    except Exception as e:
        print_colored(f"âŒ ã‚¨ãƒ©ãƒ¼: {e}", "red")
        sys.exit(1)
    
    print()
    print_colored("ğŸ›ï¸ Elder Cast ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†", "green")


if __name__ == "__main__":
    main()