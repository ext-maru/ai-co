# ğŸ“‹ Elders Guild ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ç®¡ç†æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ãŸåŒ…æ‹¬çš„ãªã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ğŸ¯ æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Elders Guildãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç™ºç”Ÿã™ã‚‹ã‚ã‚‰ã‚†ã‚‹å•é¡Œã‚’ä¸€å…ƒç®¡ç†ã—ã¾ã™ï¼š

- **ã‚¨ãƒ©ãƒ¼** - ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ã€ä¾‹å¤–ï¼ˆæ—¢å­˜ã®error_handlingã¨é€£æºï¼‰
- **éšœå®³** - ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ã€æ©Ÿèƒ½ä¸å…¨
- **è¦æ±‚** - æ–°æ©Ÿèƒ½è¦æ±‚ã€ã‚µãƒ¼ãƒ“ã‚¹è¦æ±‚  
- **å¤‰æ›´** - è¨­å®šå¤‰æ›´ã€æ§‹æˆå¤‰æ›´
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** - å‡¦ç†é…å»¶ã€ãƒªã‚½ãƒ¼ã‚¹å•é¡Œ

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
incident_management/
â”œâ”€â”€ README.md                    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ incident_history.json        # ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå±¥æ­´DB
â”œâ”€â”€ INCIDENT_PATTERNS_KB.md      # ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ãƒŠãƒ¬ãƒƒã‚¸
â”œâ”€â”€ incident_manager.py          # ã‚³ã‚¢ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
â”œâ”€â”€ error_incident_bridge.py     # ã‚¨ãƒ©ãƒ¼ç®¡ç†ã¨ã®çµ±åˆ
â””â”€â”€ auto_fix/                    # è‡ªå‹•ä¿®æ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰
```

## ğŸš€ ä½¿ã„æ–¹

### 1. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®ä½œæˆ

```bash
python incident_manager.py create \
  --category error \
  --priority high \
  --title "RabbitMQæ¥ç¶šã‚¨ãƒ©ãƒ¼" \
  --description "ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒRabbitMQã«æ¥ç¶šã§ããªã„" \
  --components worker_base rabbitmq_client \
  --impact "å…¨ãƒ¯ãƒ¼ã‚«ãƒ¼åœæ­¢"
```

### 2. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®ä¸€è¦§è¡¨ç¤º

```bash
# å…¨ã¦ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ
python incident_manager.py list

# ã‚«ãƒ†ã‚´ãƒªåˆ¥
python incident_manager.py list --category failure
```

### 3. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®æ›´æ–°

```bash
python incident_manager.py update \
  --id INC-20250104-0001 \
  --status in_progress
```

### 4. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®è§£æ±º

```bash
python incident_manager.py resolve \
  --id INC-20250104-0001 \
  --actions "RabbitMQã‚µãƒ¼ãƒ“ã‚¹å†èµ·å‹•" "æ¥ç¶šè¨­å®šä¿®æ­£" \
  --root-cause "RabbitMQã‚µãƒ¼ãƒ“ã‚¹ã®ç•°å¸¸åœæ­¢" \
  --preventive "è‡ªå‹•ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ " "ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¼·åŒ–"
```

### 5. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

```bash
# çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆ
python incident_manager.py report

# ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
python incident_manager.py analyze
```

## ğŸ”„ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ

### ã‚¨ãƒ©ãƒ¼ç®¡ç†ã¨ã®é€£æº

```bash
# æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼å±¥æ­´ã‚’ç§»è¡Œ
python error_incident_bridge.py migrate

# çµ±åˆãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ
python error_incident_bridge.py report

# æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
python error_incident_bridge.py check
```

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ã®åˆ©ç”¨

```python
from incident_manager import IncidentManager

# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
manager = IncidentManager()

# ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆä½œæˆ
incident_id = manager.create_incident(
    category="failure",
    priority="critical",
    title="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæ–­",
    description="PostgreSQLã¸ã®æ¥ç¶šãŒåˆ‡æ–­ã•ã‚ŒãŸ",
    affected_components=["db_client", "worker_analytics"],
    impact="åˆ†æå‡¦ç†ã®åœæ­¢"
)

# è§£æ±º
manager.resolve_incident(
    incident_id=incident_id,
    actions_taken=["æ¥ç¶šãƒ—ãƒ¼ãƒ«å†åˆæœŸåŒ–", "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤èª¿æ•´"],
    root_cause="æ¥ç¶šãƒ—ãƒ¼ãƒ«ã®æ¯æ¸‡",
    preventive_measures=["æ¥ç¶šãƒ—ãƒ¼ãƒ«ç›£è¦–è¿½åŠ "]
)
```

## ğŸ“Š ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚«ãƒ†ã‚´ãƒªè©³ç´°

| ã‚«ãƒ†ã‚´ãƒª | ç”¨é€” | å„ªå…ˆåº¦ç›®å®‰ | ä¾‹ |
|----------|------|-----------|-----|
| error | ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚¨ãƒ©ãƒ¼ | High-Critical | ModuleNotFoundError, TypeError |
| failure | ã‚µãƒ¼ãƒ“ã‚¹éšœå®³ | Critical | ãƒ¯ãƒ¼ã‚«ãƒ¼åœæ­¢ã€DBæ¥ç¶šæ–­ |
| request | æ©Ÿèƒ½è¦æ±‚ | Low-Medium | æ–°æ©Ÿèƒ½è¿½åŠ ã€æ”¹å–„è¦æœ› |
| change | è¨­å®šå¤‰æ›´ | Medium | configæ›´æ–°ã€ç’°å¢ƒå¤‰æ›´ |
| security | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | Critical | èªè¨¼ã‚¨ãƒ©ãƒ¼ã€ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ |
| performance | æ€§èƒ½å•é¡Œ | Medium-High | å‡¦ç†é…å»¶ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ |

## ğŸš¨ å„ªå…ˆåº¦ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

| å„ªå…ˆåº¦ | å¿œç­”æ™‚é–“ | è§£æ±ºæ™‚é–“ | åŸºæº– |
|--------|----------|----------|------|
| Critical | å³æ™‚ | 4æ™‚é–“ | ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ã€ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯ |
| High | 30åˆ† | 24æ™‚é–“ | ä¸»è¦æ©Ÿèƒ½ã®éšœå®³ |
| Medium | 4æ™‚é–“ | 3æ—¥ | å‰¯æ¬¡æ©Ÿèƒ½ã®å•é¡Œ |
| Low | 24æ™‚é–“ | 1é€±é–“ | æ”¹å–„è¦æœ›ã€è»½å¾®ãªå•é¡Œ |

## ğŸ”§ è‡ªå‹•åŒ–ã¨ã®é€£æº

### AI Command Executorã§ã®åˆ©ç”¨

```python
from libs.ai_command_helper import AICommandHelper
helper = AICommandHelper()

# ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ
incident_script = """#!/bin/bash
cd /home/aicompany/ai_co
source venv/bin/activate

# ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆä½œæˆ
python /path/to/incident_manager.py create \\
  --category failure \\
  --priority critical \\
  --title "ãƒ¯ãƒ¼ã‚«ãƒ¼å…¨åœæ­¢" \\
  --description "å…¨ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå¿œç­”ãªã—" \\
  --components all_workers \\
  --impact "å‡¦ç†å®Œå…¨åœæ­¢"

# è‡ªå‹•å¾©æ—§è©¦è¡Œ
systemctl restart ai-company-workers
"""

helper.create_bash_command(incident_script, "handle_worker_failure")
```

## ğŸ“ˆ ãƒ¡ãƒˆãƒªã‚¯ã‚¹

ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è‡ªå‹•è¿½è·¡ï¼š

- **MTTR** (Mean Time To Resolve) - å¹³å‡è§£æ±ºæ™‚é–“
- **MTBF** (Mean Time Between Failures) - å¹³å‡æ•…éšœé–“éš”  
- **å†ç™ºç‡** - åŒä¸€å•é¡Œã®å†ç™ºé »åº¦
- **ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ** - å•é¡Œã®å‚¾å‘åˆ†æ
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥å½±éŸ¿åº¦** - æœ€ã‚‚å•é¡ŒãŒå¤šã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## ğŸ”„ ç¶™ç¶šçš„æ”¹å–„

1. **å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼**
   - é€±æ¬¡: ã‚ªãƒ¼ãƒ—ãƒ³ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®ç¢ºèª
   - æœˆæ¬¡: ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã¨KBæ›´æ–°
   - å››åŠæœŸ: ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„

2. **ãƒŠãƒ¬ãƒƒã‚¸è“„ç©**
   - è§£æ±ºæ¸ˆã¿ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡º
   - INCIDENT_PATTERNS_KB.mdã¸ã®è¿½è¨˜
   - è‡ªå‹•ä¿®æ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®é–‹ç™º

3. **äºˆé˜²ç­–ã®å®Ÿè£…**
   - é »ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ ¹æœ¬å¯¾ç­–
   - ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã®å¼·åŒ–
   - è‡ªå‹•å¾©æ—§æ©Ÿèƒ½ã®æ‹¡å……

## ğŸ¯ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

- [ ] Slacké€šçŸ¥çµ±åˆ
- [ ] è‡ªå‹•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆäºˆæ¸¬ï¼ˆMLæ´»ç”¨ï¼‰
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ UI
- [ ] SLAç®¡ç†æ©Ÿèƒ½
- [ ] å¤–éƒ¨ãƒã‚±ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ é€£æº

---

**ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ã«ã‚ˆã‚Šã€Elders Guildã‚·ã‚¹ãƒ†ãƒ ã®å®‰å®šæ€§ã¨ä¿¡é ¼æ€§ã‚’ç¶™ç¶šçš„ã«å‘ä¸Šã•ã›ã¾ã™ï¼**
