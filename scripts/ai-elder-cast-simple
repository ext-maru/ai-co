#!/usr/bin/env python3
"""
AI Elder Cast Simple - ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆ
ä¸­é–“ç‰ˆçŸ¥è­˜ãƒ•ã‚¡ã‚¤ãƒ«ã§èµ·å‹•
"""

import os
import subprocess
import sys
from pathlib import Path


def main():
    """ã‚·ãƒ³ãƒ—ãƒ«èµ·å‹•"""
    project_root = Path(__file__).parent.parent

    print("ğŸ”® AI Elder Cast Simple èµ·å‹•")
    print()

    # ä¸­é–“ç‰ˆãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
    medium_file = project_root / "ELDER_KNOWLEDGE_CONTEXT_MEDIUM.md"

    if not medium_file.exists():
        print("âŒ ã‚¨ãƒ©ãƒ¼: ELDER_KNOWLEDGE_CONTEXT_MEDIUM.md ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        sys.exit(1)

    print(f"ğŸ“„ çŸ¥è­˜ãƒ•ã‚¡ã‚¤ãƒ«: {medium_file.name} (8KB)")

    # Claude Codeæ¤œç´¢
    claude_cmd = None
    for cmd in ["claude", "claude-cli", "claude-code"]:
        try:
            subprocess.run([cmd, "--version"], capture_output=True, check=True)
            claude_cmd = cmd
            print(f"âœ… Claude Codeç™ºè¦‹: {cmd}")
            break
        except (subprocess.CalledProcessError, FileNotFoundError):
            continue

    if not claude_cmd:
        print("âŒ ã‚¨ãƒ©ãƒ¼: Claude Code ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        sys.exit(1)

    # æ—¥æœ¬èªç’°å¢ƒè¨­å®š
    os.environ["LANG"] = "ja_JP.UTF-8"
    os.environ["LC_ALL"] = "ja_JP.UTF-8"

    print("ğŸ›ï¸ ã‚¯ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ«ãƒ€ãƒ¼å¬å–šä¸­...")
    print()

    # Claude Codeèµ·å‹•
    try:
        subprocess.run([claude_cmd, "--dangerously-skip-permissions", str(medium_file)])
    except KeyboardInterrupt:
        print("\nğŸ›ï¸ Elder Flow ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†")
    except Exception as e:
        print(f"âŒ ã‚¨ãƒ©ãƒ¼: Claude Codeèµ·å‹•å¤±æ•—: {e}")
        sys.exit(1)


if __name__ == "__main__":
    main()
