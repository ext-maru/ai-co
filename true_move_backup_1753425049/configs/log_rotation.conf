# AI Company ログローテーション設定
# Created: 2025-07-04

/home/aicompany/ai_co/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    maxsize 100M
    create 0644 aicompany aicompany
    postrotate
        # ログローテーション後の処理
        /usr/bin/find /home/aicompany/ai_co/logs -name "*.log.*.gz" -mtime +30 -delete
    endscript
}

/home/aicompany/ai_co/logs/workers/*.log {
    daily
    rotate 3
    compress
    delaycompress
    missingok
    notifempty
    maxsize 50M
    create 0644 aicompany aicompany
}

# Slackログ専用設定
/home/aicompany/ai_co/logs/slack_*.log {
    daily
    rotate 1
    compress
    missingok
    notifempty
    maxsize 10M
    olddir /home/aicompany/ai_co/logs/slack_archive
    create 0644 aicompany aicompany
}
